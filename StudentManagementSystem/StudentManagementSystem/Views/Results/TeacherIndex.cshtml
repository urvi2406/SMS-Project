@model IEnumerable<StudentManagementSystem.Models.Result>

@{
    ViewData["Title"] = "Manage Results";
}

@section Styles {
    <link rel="stylesheet" href="~/css/results-teacher.css" asp-append-version="true" />
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2 class="fw-bold mb-1">Manage Results</h2>
        <p class="text-muted mb-0">Exam-wise result management</p>
    </div>
</div>

@if (Model == null || Model.Count() == 0)
{
    <div class="alert alert-info">
        No exams found for result entry.
    </div>
}
else
{
    <div class="results-grid">
        @foreach (var r in Model)
        {
            <div class="result-card">

                <div class="card-header">
                    <h5>@r.Exam.ExamName</h5>
                    <span class="course">@r.Course.CourseName</span>
                </div>

                <div class="card-body">
                    <div class="meta">
                        <span><i class="bi bi-mortarboard"></i> Semester @r.Exam.Semester</span>
                        <span>
                            <i class="bi bi-people"></i>
                            @Model.Count(x => x.ExamId == r.ExamId) Students
                        </span>
                    </div>

                    <div class="status @(r.Exam != null && r.Exam.IsPublished ? "published" : "draft")">
                        @(r.Exam != null && r.Exam.IsPublished ? "Results Published" : "Draft Results")
                    </div>

                </div>

                <div class="card-actions">
                    <a asp-action="Details"
                       asp-route-examId="@r.Exam.ExamId"
                       class="btn-manage">
                        Manage Results
                    </a>
                </div>
            </div>
        }
    </div>
}
